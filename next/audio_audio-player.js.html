<!DOCTYPE html>
<html lang="en">
<head>
    
    <meta charset="utf-8">
    <title>audio/audio-player.js - ITSLanguage JavaScript SDK</title>
    
    <meta name="description" content="Speech technology for language education. JSDoc 3 website for the JavaScript SDK." />
    
        <meta name="keywords" content="itslangauge, jsdoc, documentation, speech, speech technology" />
        <meta name="keyword" content="itslangauge, jsdoc, documentation, speech, speech technology" />
    
    
    
    <meta property="og:title" content="ITSLanguage JavaScript SDK"/>
    <meta property="og:type" content="website"/>
    <meta property="og:image" content="https://avatars0.githubusercontent.com/u/20972344?s=400&u=73936e7fa2d2a1e5c180a11675bf9166d3717a6d&v=4"/>
    <meta property="og:site_name" content="ITSLanguage JavaScript SDK"/>
    <meta property="og:url" content="http://itslanguage.github.io/itslanguage-js/"/>
    
    <script src="scripts/prettify/prettify.js"></script>
    <script src="scripts/prettify/lang-css.js"></script>
    <!--[if lt IE 9]>
      <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
    <link type="text/css" rel="stylesheet" href="styles/prettify.css">
    <link type="text/css" rel="stylesheet" href="styles/jsdoc.css">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
</head>
<body>

<input type="checkbox" id="nav-trigger" class="nav-trigger" />
<label for="nav-trigger" class="navicon-button x">
  <div class="navicon"></div>
</label>

<label for="nav-trigger" class="overlay"></label>

<nav>
    
    <input type="text" id="nav-search" placeholder="Search" />
    
    <h2><a href="index.html">Home</a></h2><h2><a href="https://github.com/itslanguage/itslanguage-js" target="_blank" class="menu-item" id="repository" >Github repo</a></h2><h3>Modules</h3><ul><li><a href="module-sdk.html">sdk</a><ul class='methods'><li data-type='method'><a href="module-sdk.html#.createAudioPlayer">createAudioPlayer</a></li><li data-type='method'><a href="module-sdk.html#.createAudioRecorder">createAudioRecorder</a></li><li data-type='method'><a href="module-sdk.html#.createItslSdk">createItslSdk</a></li><li data-type='method'><a href="module-sdk.html#.createPlayer">createPlayer</a></li><li data-type='method'><a href="module-sdk.html#.createStopwatch">createStopwatch</a></li><li data-type='method'><a href="module-sdk.html#.createVolumeMeter">createVolumeMeter</a></li></ul></li><li><a href="module-sdk_lib_api_authentication.html">sdk/lib/api/authentication</a><ul class='methods'><li data-type='method'><a href="module-sdk_lib_api_authentication.html#.assembleScope">assembleScope</a></li><li data-type='method'><a href="module-sdk_lib_api_authentication.html#.authenticate">authenticate</a></li><li data-type='method'><a href="module-sdk_lib_api_authentication.html#.impersonate">impersonate</a></li></ul></li><li><a href="module-sdk_lib_api_basicauth.html">sdk/lib/api/basicauth</a><ul class='methods'><li data-type='method'><a href="module-sdk_lib_api_basicauth.html#.create">create</a></li></ul></li><li><a href="module-sdk_lib_api_broadcaster.html">sdk/lib/api/broadcaster</a></li><li><a href="module-sdk_lib_api_categories.html">sdk/lib/api/categories</a><ul class='methods'><li data-type='method'><a href="module-sdk_lib_api_categories.html#.create">create</a></li><li data-type='method'><a href="module-sdk_lib_api_categories.html#.getAll">getAll</a></li><li data-type='method'><a href="module-sdk_lib_api_categories.html#.getAllWithParentId">getAllWithParentId</a></li><li data-type='method'><a href="module-sdk_lib_api_categories.html#.getById">getById</a></li><li data-type='method'><a href="module-sdk_lib_api_categories.html#.update">update</a></li></ul></li><li><a href="module-sdk_lib_api_challenges.html">sdk/lib/api/challenges</a><ul class='members'><li data-type='member'><a href="module-sdk_lib_api_challenges.html#.choice">choice</a></li><li data-type='member'><a href="module-sdk_lib_api_challenges.html#.choiceRecognition">choiceRecognition</a></li><li data-type='member'><a href="module-sdk_lib_api_challenges.html#.feedback">feedback</a></li><li data-type='member'><a href="module-sdk_lib_api_challenges.html#.feedbackSpeech">feedbackSpeech</a></li><li data-type='member'><a href="module-sdk_lib_api_challenges.html#.pronunciation">pronunciation</a></li><li data-type='member'><a href="module-sdk_lib_api_challenges.html#.pronunciationAnalysis">pronunciationAnalysis</a></li><li data-type='member'><a href="module-sdk_lib_api_challenges.html#.speech">speech</a></li><li data-type='member'><a href="module-sdk_lib_api_challenges.html#.speechRecording">speechRecording</a></li></ul></li><li><a href="module-sdk_lib_api_challenges_choice.html">sdk/lib/api/challenges/choice</a><ul class='methods'><li data-type='method'><a href="module-sdk_lib_api_challenges_choice.html#.create">create</a></li><li data-type='method'><a href="module-sdk_lib_api_challenges_choice.html#.getAll">getAll</a></li><li data-type='method'><a href="module-sdk_lib_api_challenges_choice.html#.getById">getById</a></li></ul></li><li><a href="module-sdk_lib_api_challenges_choice_recognition.html">sdk/lib/api/challenges/choice/recognition</a><ul class='methods'><li data-type='method'><a href="module-sdk_lib_api_challenges_choice_recognition.html#.create">create</a></li><li data-type='method'><a href="module-sdk_lib_api_challenges_choice_recognition.html#.getAll">getAll</a></li><li data-type='method'><a href="module-sdk_lib_api_challenges_choice_recognition.html#.getById">getById</a></li><li data-type='method'><a href="module-sdk_lib_api_challenges_choice_recognition.html#.prepare">prepare</a></li><li data-type='method'><a href="module-sdk_lib_api_challenges_choice_recognition.html#.prepareChallenge">prepareChallenge</a></li><li data-type='method'><a href="module-sdk_lib_api_challenges_choice_recognition.html#.recognise">recognise</a></li><li data-type='method'><a href="module-sdk_lib_api_challenges_choice_recognition.html#.recogniseAudioStream">recogniseAudioStream</a></li><li data-type='method'><a href="module-sdk_lib_api_challenges_choice_recognition.html#~url">url</a></li></ul></li><li><a href="module-sdk_lib_api_challenges_feedback.html">sdk/lib/api/challenges/feedback</a><ul class='methods'><li data-type='method'><a href="module-sdk_lib_api_challenges_feedback.html#.create">create</a></li><li data-type='method'><a href="module-sdk_lib_api_challenges_feedback.html#.getAll">getAll</a></li><li data-type='method'><a href="module-sdk_lib_api_challenges_feedback.html#.getById">getById</a></li></ul></li><li><a href="module-sdk_lib_api_challenges_feedback_speech.html">sdk/lib/api/challenges/feedback/speech</a><ul class='methods'><li data-type='method'><a href="module-sdk_lib_api_challenges_feedback_speech.html#.feedback">feedback</a></li><li data-type='method'><a href="module-sdk_lib_api_challenges_feedback_speech.html#.listenAndReply">listenAndReply</a></li><li data-type='method'><a href="module-sdk_lib_api_challenges_feedback_speech.html#.pause">pause</a></li><li data-type='method'><a href="module-sdk_lib_api_challenges_feedback_speech.html#.prepare">prepare</a></li><li data-type='method'><a href="module-sdk_lib_api_challenges_feedback_speech.html#.resume">resume</a></li></ul></li><li><a href="module-sdk_lib_api_challenges_pronunciation.html">sdk/lib/api/challenges/pronunciation</a><ul class='methods'><li data-type='method'><a href="module-sdk_lib_api_challenges_pronunciation.html#.create">create</a></li><li data-type='method'><a href="module-sdk_lib_api_challenges_pronunciation.html#.deleteChallenge">deleteChallenge</a></li><li data-type='method'><a href="module-sdk_lib_api_challenges_pronunciation.html#.getAll">getAll</a></li><li data-type='method'><a href="module-sdk_lib_api_challenges_pronunciation.html#.getById">getById</a></li></ul></li><li><a href="module-sdk_lib_api_challenges_pronunciation_analysis.html">sdk/lib/api/challenges/pronunciation/analysis</a><ul class='methods'><li data-type='method'><a href="module-sdk_lib_api_challenges_pronunciation_analysis.html#.alignChallenge">alignChallenge</a></li><li data-type='method'><a href="module-sdk_lib_api_challenges_pronunciation_analysis.html#.endStreamAudio">endStreamAudio</a></li><li data-type='method'><a href="module-sdk_lib_api_challenges_pronunciation_analysis.html#.getById">getById</a></li><li data-type='method'><a href="module-sdk_lib_api_challenges_pronunciation_analysis.html#.prepare">prepare</a></li><li data-type='method'><a href="module-sdk_lib_api_challenges_pronunciation_analysis.html#.prepareAudio">prepareAudio</a></li><li data-type='method'><a href="module-sdk_lib_api_challenges_pronunciation_analysis.html#.prepareChallenge">prepareChallenge</a></li><li data-type='method'><a href="module-sdk_lib_api_challenges_pronunciation_analysis.html#.streamAudio">streamAudio</a></li><li data-type='method'><a href="module-sdk_lib_api_challenges_pronunciation_analysis.html#~url">url</a></li></ul></li><li><a href="module-sdk_lib_api_challenges_speech.html">sdk/lib/api/challenges/speech</a><ul class='methods'><li data-type='method'><a href="module-sdk_lib_api_challenges_speech.html#.create">create</a></li><li data-type='method'><a href="module-sdk_lib_api_challenges_speech.html#.getAll">getAll</a></li><li data-type='method'><a href="module-sdk_lib_api_challenges_speech.html#.getById">getById</a></li></ul></li><li><a href="module-sdk_lib_api_challenges_speech_recordings.html">sdk/lib/api/challenges/speech/recordings</a><ul class='methods'><li data-type='method'><a href="module-sdk_lib_api_challenges_speech_recordings.html#.getAll">getAll</a></li><li data-type='method'><a href="module-sdk_lib_api_challenges_speech_recordings.html#.getById">getById</a></li><li data-type='method'><a href="module-sdk_lib_api_challenges_speech_recordings.html#.record">record</a></li><li data-type='method'><a href="module-sdk_lib_api_challenges_speech_recordings.html#~url">url</a></li></ul></li><li><a href="module-sdk_lib_api_communication.html">sdk/lib/api/communication</a><ul class='members'><li data-type='member'><a href="module-sdk_lib_api_communication.html#.settings">settings</a></li><li data-type='member'><a href="module-sdk_lib_api_communication.html#~APPLICATION_JSON">APPLICATION_JSON</a></li><li data-type='member'><a href="module-sdk_lib_api_communication.html#~AUTHORIZATION">AUTHORIZATION</a></li><li data-type='member'><a href="module-sdk_lib_api_communication.html#~CONTENT_TYPE">CONTENT_TYPE</a></li></ul><ul class='methods'><li data-type='method'><a href="module-sdk_lib_api_communication.html#.authorisedRequest">authorisedRequest</a></li><li data-type='method'><a href="module-sdk_lib_api_communication.html#.request">request</a></li><li data-type='method'><a href="module-sdk_lib_api_communication.html#.updateSettings">updateSettings</a></li><li data-type='method'><a href="module-sdk_lib_api_communication.html#~getBearerToken">getBearerToken</a></li><li data-type='method'><a href="module-sdk_lib_api_communication.html#~handleResponse">handleResponse</a></li></ul></li><li><a href="module-sdk_lib_api_communication_websocket.html">sdk/lib/api/communication/websocket</a><ul class='methods'><li data-type='method'><a href="module-sdk_lib_api_communication_websocket.html#.closeWebsocketConnection">closeWebsocketConnection</a></li><li data-type='method'><a href="module-sdk_lib_api_communication_websocket.html#.getWebsocketConnection">getWebsocketConnection</a></li><li data-type='method'><a href="module-sdk_lib_api_communication_websocket.html#.makeWebsocketCall">makeWebsocketCall</a></li><li data-type='method'><a href="module-sdk_lib_api_communication_websocket.html#.openWebsocketConnection">openWebsocketConnection</a></li><li data-type='method'><a href="module-sdk_lib_api_communication_websocket.html#~establishNewBundesbahn">establishNewBundesbahn</a></li><li data-type='method'><a href="module-sdk_lib_api_communication_websocket.html#~handleWebsocketAuthorisationChallenge">handleWebsocketAuthorisationChallenge</a></li></ul></li><li><a href="module-sdk_lib_api_emailauth.html">sdk/lib/api/emailauth</a><ul class='methods'><li data-type='method'><a href="module-sdk_lib_api_emailauth.html#.create">create</a></li><li data-type='method'><a href="module-sdk_lib_api_emailauth.html#~url">url</a></li></ul></li><li><a href="module-sdk_lib_api_groups.html">sdk/lib/api/groups</a><ul class='methods'><li data-type='method'><a href="module-sdk_lib_api_groups.html#.create">create</a></li><li data-type='method'><a href="module-sdk_lib_api_groups.html#.getAll">getAll</a></li><li data-type='method'><a href="module-sdk_lib_api_groups.html#.getById">getById</a></li></ul></li><li><a href="module-sdk_lib_api_organisations.html">sdk/lib/api/organisations</a><ul class='methods'><li data-type='method'><a href="module-sdk_lib_api_organisations.html#.create">create</a></li><li data-type='method'><a href="module-sdk_lib_api_organisations.html#.getAll">getAll</a></li><li data-type='method'><a href="module-sdk_lib_api_organisations.html#.getById">getById</a></li></ul></li><li><a href="module-sdk_lib_api_profile.html">sdk/lib/api/profile</a><ul class='methods'><li data-type='method'><a href="module-sdk_lib_api_profile.html#.create">create</a></li><li data-type='method'><a href="module-sdk_lib_api_profile.html#.getById">getById</a></li><li data-type='method'><a href="module-sdk_lib_api_profile.html#.getCurrent">getCurrent</a></li><li data-type='method'><a href="module-sdk_lib_api_profile.html#~url">url</a></li></ul></li><li><a href="module-sdk_lib_api_progress.html">sdk/lib/api/progress</a><ul class='methods'><li data-type='method'><a href="module-sdk_lib_api_progress.html#.getById">getById</a></li></ul></li><li><a href="module-sdk_lib_api_roles.html">sdk/lib/api/roles</a><ul class='methods'><li data-type='method'><a href="module-sdk_lib_api_roles.html#.create">create</a></li><li data-type='method'><a href="module-sdk_lib_api_roles.html#.getAll">getAll</a></li><li data-type='method'><a href="module-sdk_lib_api_roles.html#.getById">getById</a></li></ul></li><li><a href="module-sdk_lib_api_tenants.html">sdk/lib/api/tenants</a><ul class='methods'><li data-type='method'><a href="module-sdk_lib_api_tenants.html#.create">create</a></li><li data-type='method'><a href="module-sdk_lib_api_tenants.html#.getAll">getAll</a></li><li data-type='method'><a href="module-sdk_lib_api_tenants.html#.getById">getById</a></li></ul></li><li><a href="module-sdk_lib_api_users.html">sdk/lib/api/users</a><ul class='methods'><li data-type='method'><a href="module-sdk_lib_api_users.html#.create">create</a></li><li data-type='method'><a href="module-sdk_lib_api_users.html#.getAll">getAll</a></li><li data-type='method'><a href="module-sdk_lib_api_users.html#.getById">getById</a></li><li data-type='method'><a href="module-sdk_lib_api_users.html#.getCurrent">getCurrent</a></li></ul></li><li><a href="module-sdk_lib_api_utils.html">sdk/lib/api/utils</a><ul class='methods'><li data-type='method'><a href="module-sdk_lib_api_utils.html#.dataToBase64">dataToBase64</a></li></ul></li><li><a href="module-sdk_lib_api_utils_audio-over-socket.html">sdk/lib/api/utils/audio-over-socket</a><ul class='methods'><li data-type='method'><a href="module-sdk_lib_api_utils_audio-over-socket.html#.encodeAndSendAudioOnDataAvailable">encodeAndSendAudioOnDataAvailable</a></li><li data-type='method'><a href="module-sdk_lib_api_utils_audio-over-socket.html#.prepareServerForAudio">prepareServerForAudio</a></li><li data-type='method'><a href="module-sdk_lib_api_utils_audio-over-socket.html#.registerStreamForRecorder">registerStreamForRecorder</a></li><li data-type='method'><a href="module-sdk_lib_api_utils_audio-over-socket.html#.waitForUserMediaApproval">waitForUserMediaApproval</a></li></ul></li><li><a href="module-sdk_lib_audio_audio-player.html">sdk/lib/audio/audio-player</a></li><li><a href="module-sdk_lib_audio_audio-recorder.html">sdk/lib/audio/audio-recorder</a></li><li><a href="module-sdk_lib_audio_audio-tools.html">sdk/lib/audio/audio-tools</a><ul class='methods'><li data-type='method'><a href="module-sdk_lib_audio_audio-tools.html#.generateWaveSample">generateWaveSample</a></li></ul></li><li><a href="module-sdk_lib_audio_tools.html">sdk/lib/audio/tools</a></li><li><a href="module-sdk_lib_audio_wave-packer.html">sdk/lib/audio/wave-packer</a><ul class='methods'><li data-type='method'><a href="module-sdk_lib_audio_wave-packer.html#.createWAVEHeader">createWAVEHeader</a></li><li data-type='method'><a href="module-sdk_lib_audio_wave-packer.html#.wordToUTF8ByteArray">wordToUTF8ByteArray</a></li></ul></li><li><a href="module-sdk_lib_WebAudio_AudioContext.html">sdk/lib/WebAudio/AudioContext</a></li><li><a href="module-sdk_lib_WebAudio_Player.html">sdk/lib/WebAudio/Player</a></li><li><a href="module-sdk_lib_WebAudio_Recorder.html">sdk/lib/WebAudio/Recorder</a></li></ul><h3>Classes</h3><ul><li><a href="module-sdk.Itslanguage.html">Itslanguage</a></li><li><a href="module-sdk_lib_audio_audio-player-AudioPlayer.html">AudioPlayer</a><ul class='methods'><li data-type='method'><a href="module-sdk_lib_audio_audio-player-AudioPlayer.html#addEventListener">addEventListener</a></li><li data-type='method'><a href="module-sdk_lib_audio_audio-player-AudioPlayer.html#bindStopwatch">bindStopwatch</a></li><li data-type='method'><a href="module-sdk_lib_audio_audio-player-AudioPlayer.html#canPlay">canPlay</a></li><li data-type='method'><a href="module-sdk_lib_audio_audio-player-AudioPlayer.html#getAudioVolume">getAudioVolume</a></li><li data-type='method'><a href="module-sdk_lib_audio_audio-player-AudioPlayer.html#getBufferFill">getBufferFill</a></li><li data-type='method'><a href="module-sdk_lib_audio_audio-player-AudioPlayer.html#getCurrentTime">getCurrentTime</a></li><li data-type='method'><a href="module-sdk_lib_audio_audio-player-AudioPlayer.html#getDuration">getDuration</a></li><li data-type='method'><a href="module-sdk_lib_audio_audio-player-AudioPlayer.html#getPlaybackRate">getPlaybackRate</a></li><li data-type='method'><a href="module-sdk_lib_audio_audio-player-AudioPlayer.html#isAudioMuted">isAudioMuted</a></li><li data-type='method'><a href="module-sdk_lib_audio_audio-player-AudioPlayer.html#isPlaying">isPlaying</a></li><li data-type='method'><a href="module-sdk_lib_audio_audio-player-AudioPlayer.html#load">load</a></li><li data-type='method'><a href="module-sdk_lib_audio_audio-player-AudioPlayer.html#pause">pause</a></li><li data-type='method'><a href="module-sdk_lib_audio_audio-player-AudioPlayer.html#play">play</a></li><li data-type='method'><a href="module-sdk_lib_audio_audio-player-AudioPlayer.html#preload">preload</a></li><li data-type='method'><a href="module-sdk_lib_audio_audio-player-AudioPlayer.html#removeEventListener">removeEventListener</a></li><li data-type='method'><a href="module-sdk_lib_audio_audio-player-AudioPlayer.html#reset">reset</a></li><li data-type='method'><a href="module-sdk_lib_audio_audio-player-AudioPlayer.html#resetEventListeners">resetEventListeners</a></li><li data-type='method'><a href="module-sdk_lib_audio_audio-player-AudioPlayer.html#scrub">scrub</a></li><li data-type='method'><a href="module-sdk_lib_audio_audio-player-AudioPlayer.html#setAudioMute">setAudioMute</a></li><li data-type='method'><a href="module-sdk_lib_audio_audio-player-AudioPlayer.html#setAudioVolume">setAudioVolume</a></li><li data-type='method'><a href="module-sdk_lib_audio_audio-player-AudioPlayer.html#setPlaybackRate">setPlaybackRate</a></li><li data-type='method'><a href="module-sdk_lib_audio_audio-player-AudioPlayer.html#stop">stop</a></li><li data-type='method'><a href="module-sdk_lib_audio_audio-player-AudioPlayer.html#toggleAudioMute">toggleAudioMute</a></li><li data-type='method'><a href="module-sdk_lib_audio_audio-player-AudioPlayer.html#togglePlayback">togglePlayback</a></li></ul></li><li><a href="module-sdk_lib_audio_audio-recorder-AudioRecorder.html">AudioRecorder</a><ul class='methods'><li data-type='method'><a href="module-sdk_lib_audio_audio-recorder-AudioRecorder.html#.createAudioContext">createAudioContext</a></li><li data-type='method'><a href="module-sdk_lib_audio_audio-recorder-AudioRecorder.html#addEventListener">addEventListener</a></li><li data-type='method'><a href="module-sdk_lib_audio_audio-recorder-AudioRecorder.html#bindStopwatch">bindStopwatch</a></li><li data-type='method'><a href="module-sdk_lib_audio_audio-recorder-AudioRecorder.html#getAudioSpecs">getAudioSpecs</a></li><li data-type='method'><a href="module-sdk_lib_audio_audio-recorder-AudioRecorder.html#hasUserMediaApproval">hasUserMediaApproval</a></li><li data-type='method'><a href="module-sdk_lib_audio_audio-recorder-AudioRecorder.html#isPaused">isPaused</a></li><li data-type='method'><a href="module-sdk_lib_audio_audio-recorder-AudioRecorder.html#isRecording">isRecording</a></li><li data-type='method'><a href="module-sdk_lib_audio_audio-recorder-AudioRecorder.html#record">record</a></li><li data-type='method'><a href="module-sdk_lib_audio_audio-recorder-AudioRecorder.html#removeAllEventListeners">removeAllEventListeners</a></li><li data-type='method'><a href="module-sdk_lib_audio_audio-recorder-AudioRecorder.html#removeEventListener">removeEventListener</a></li><li data-type='method'><a href="module-sdk_lib_audio_audio-recorder-AudioRecorder.html#requestUserMedia">requestUserMedia</a></li><li data-type='method'><a href="module-sdk_lib_audio_audio-recorder-AudioRecorder.html#startRecordingSession">startRecordingSession</a></li><li data-type='method'><a href="module-sdk_lib_audio_audio-recorder-AudioRecorder.html#stop">stop</a></li><li data-type='method'><a href="module-sdk_lib_audio_audio-recorder-AudioRecorder.html#streamCallback">streamCallback</a></li><li data-type='method'><a href="module-sdk_lib_audio_audio-recorder-AudioRecorder.html#toggleRecording">toggleRecording</a></li></ul></li><li><a href="module-sdk_lib_audio_audio-tools-VolumeMeter.html">VolumeMeter</a><ul class='methods'><li data-type='method'><a href="module-sdk_lib_audio_audio-tools-VolumeMeter.html#getVolumeIndication">getVolumeIndication</a></li><li data-type='method'><a href="module-sdk_lib_audio_audio-tools-VolumeMeter.html#resumeAnalyser">resumeAnalyser</a></li><li data-type='method'><a href="module-sdk_lib_audio_audio-tools-VolumeMeter.html#stopAnalyser">stopAnalyser</a></li><li data-type='method'><a href="module-sdk_lib_audio_audio-tools-VolumeMeter.html#updateAnalysers">updateAnalysers</a></li></ul></li><li><a href="module-sdk_lib_audio_tools-Stopwatch.html">Stopwatch</a><ul class='methods'><li data-type='method'><a href="module-sdk_lib_audio_tools-Stopwatch.html#reset">reset</a></li><li data-type='method'><a href="module-sdk_lib_audio_tools-Stopwatch.html#start">start</a></li><li data-type='method'><a href="module-sdk_lib_audio_tools-Stopwatch.html#stop">stop</a></li><li data-type='method'><a href="module-sdk_lib_audio_tools-Stopwatch.html#tick">tick</a></li><li data-type='method'><a href="module-sdk_lib_audio_tools-Stopwatch.html#update">update</a></li></ul></li><li><a href="module-sdk_lib_audio_wave-packer-WavePacker.html">WavePacker</a><ul class='methods'><li data-type='method'><a href="module-sdk_lib_audio_wave-packer-WavePacker.html#.writeUTFBytes">writeUTFBytes</a></li><li data-type='method'><a href="module-sdk_lib_audio_wave-packer-WavePacker.html#encodeWAV">encodeWAV</a></li><li data-type='method'><a href="module-sdk_lib_audio_wave-packer-WavePacker.html#init">init</a></li></ul></li><li><a href="module-sdk_lib_WebAudio_AudioContext-AudioContext.html">AudioContext</a><ul class='methods'><li data-type='method'><a href="module-sdk_lib_WebAudio_AudioContext-AudioContext.html#.createAudioContext">createAudioContext</a></li><li data-type='method'><a href="module-sdk_lib_WebAudio_AudioContext-AudioContext.html#addEventListener">addEventListener</a></li><li data-type='method'><a href="module-sdk_lib_WebAudio_AudioContext-AudioContext.html#fireEvent">fireEvent</a></li><li data-type='method'><a href="module-sdk_lib_WebAudio_AudioContext-AudioContext.html#removeEventListener">removeEventListener</a></li><li data-type='method'><a href="module-sdk_lib_WebAudio_AudioContext-AudioContext.html#resumeAudioContext">resumeAudioContext</a></li><li data-type='method'><a href="module-sdk_lib_WebAudio_AudioContext-AudioContext.html#suspendAudioContext">suspendAudioContext</a></li></ul></li><li><a href="module-sdk_lib_WebAudio_Player-Player.html">Player</a><ul class='methods'><li data-type='method'><a href="module-sdk_lib_WebAudio_Player-Player.html#audioBufferExists">audioBufferExists</a></li><li data-type='method'><a href="module-sdk_lib_WebAudio_Player-Player.html#audioSourceExists">audioSourceExists</a></li><li data-type='method'><a href="module-sdk_lib_WebAudio_Player-Player.html#createBufferSource">createBufferSource</a></li><li data-type='method'><a href="module-sdk_lib_WebAudio_Player-Player.html#disconnectBufferSource">disconnectBufferSource</a></li><li data-type='method'><a href="module-sdk_lib_WebAudio_Player-Player.html#getAudioContext">getAudioContext</a></li><li data-type='method'><a href="module-sdk_lib_WebAudio_Player-Player.html#getBufferSource">getBufferSource</a></li><li data-type='method'><a href="module-sdk_lib_WebAudio_Player-Player.html#getCurrentTime">getCurrentTime</a></li><li data-type='method'><a href="module-sdk_lib_WebAudio_Player-Player.html#getDuration">getDuration</a></li><li data-type='method'><a href="module-sdk_lib_WebAudio_Player-Player.html#isPlaying">isPlaying</a></li><li data-type='method'><a href="module-sdk_lib_WebAudio_Player-Player.html#load">load</a></li><li data-type='method'><a href="module-sdk_lib_WebAudio_Player-Player.html#mute">mute</a></li><li data-type='method'><a href="module-sdk_lib_WebAudio_Player-Player.html#pause">pause</a></li><li data-type='method'><a href="module-sdk_lib_WebAudio_Player-Player.html#play">play</a></li><li data-type='method'><a href="module-sdk_lib_WebAudio_Player-Player.html#setVolume">setVolume</a></li><li data-type='method'><a href="module-sdk_lib_WebAudio_Player-Player.html#stop">stop</a></li></ul></li></ul>
</nav>

<div id="main">
    
    <h1 class="page-title">audio/audio-player.js</h1>
    

    



    
    <section>
        <article>
            <pre class="prettyprint source linenums"><code>import allOff from 'event-emitter/all-off';
import ee from 'event-emitter';
import Stopwatch from './tools';
import WebAudioPlayer from './web-audio-player';

/**
 * ITSLanguage AudioPlayer non-graphical component.
 * @module sdk/lib/audio/audio-player
 */
class AudioPlayer {
  /**
   * Construct an AudioPlayer for playing .wav or .mp3 files.
   *
   * @param {?Object} options - Override any of the default settings.
   * @emits {Event} 'playbackstopped' When playback has ended, been stopped or been paused.
   * @emits {Event} All events the HTML5 Audio also fires. {@link http://www.w3schools.com/tags/ref_av_dom.asp}
   */
  constructor(options) {
    /**
     * @type {Object}
     * @private
     */
    this.settings = Object.assign({}, options);

    this.playbackCompatibility();
    const self = this;
    const callbacks = {
      playingCb() {
        self.emitter.emit('playing', []);
      },
      timeupdateCb() {
        self.emitter.emit('timeupdate', []);
      },
      durationchangeCb() {
        self.emitter.emit('durationchange', []);
      },
      canplayCb() {
        self.emitter.emit('canplay', []);
      },
      endedCb() {
        self.emitter.emit('ended', []);
      },
      pauseCb() {
        self.emitter.emit('pause', []);
      },
      stoppedCb() {
        self.emitter.emit('stopped', []);
      },
      playbackStoppedCb() {
        self.emitter.emit('playbackstopped', []);
        if (self.stopwatch) {
          self.stopwatch.stop();
        }
      },
      progressCb() {
        self.emitter.emit('progress', []);
      },
      errorCb() {
        self.emitter.emit('error', []);
      },
    };
    /**
     * Specific audio player.
     * @type {WebAudioPlayer}
     * @private
     */
    this.player = this.getPlayer(callbacks);

    /**
     * @type {Object}
     * @private
     */
    this.emitter = ee({});

    /**
     * @type {Object}
     * @private
     */
    this.stopwatch = null;

    /**
     * @type {number}
     * @private
     */
    this.audioLevel = 1;

    /**
     * @type {boolean}
     * @private
     */
    this.audioMuted = false;
  }

  /**
   * Turn off all event listeners for this player.
   */
  resetEventListeners() {
    allOff(this.emitter);
  }

  /**
   * Add an event listener. Listens to events emitted from the player.
   *
   * @param {string} name - Name of the event.
   * @param {Function} handler - Handler function to add.
   */
  addEventListener(name, handler) {
    this.emitter.on(name, handler);
  }

  /**
   * Remove an event listener of the player.
   *
   * @param {string} name - Name of the event.
   * @param {Function} handler - Handler function to remove.
   */
  removeEventListener(name, handler) {
    this.emitter.off(name, handler);
  }

  /**
   * Check for mandatory browser compatibility.
   * Logs detailed browser compatibilities related to for audio playback.
   *
   * @throws {Error} If no native wave or MP3 playback is available.
   * @private
   */
  playbackCompatibility() {
    // Detect audio playback capabilities.

    // Detect HTML5 Audio playback.
    // http://caniuse.com/#feat=audio
    this.canUseAudio = Boolean(Audio);
    console.log('Native HTML5 Audio playback capability:', this.canUseAudio);

    if (!this.canUseAudio) {
      throw new Error(
        'Some form of audio playback capability is required',
      );
    }
    if (this.canUseAudio) {
      const audio = new Audio();
      if (!(audio.canPlayType &amp;&amp; audio.canPlayType instanceof Function)) {
        throw new Error(
          'Unable to detect audio playback capabilities',
        );
      }
      const canPlayOggVorbis = audio.canPlayType(
        'audio/ogg; codecs="vorbis"',
      ) !== '';
      const canPlayOggOpus = audio.canPlayType(
        'audio/ogg; codecs="opus"',
      ) !== '';
      const canPlayWave = audio.canPlayType('audio/wav') !== '';
      const canPlayMP3 = audio.canPlayType('audio/mpeg; codecs="mp3"') !== '';
      const canPlayAAC = audio.canPlayType(
        'audio/mp4; codecs="mp4a.40.2"',
      ) !== '';
      const canPlay3GPP = audio.canPlayType(
        'audio/3gpp; codecs="samr"',
      ) !== '';

      console.log('Native Vorbis audio in Ogg container playback capability:', canPlayOggVorbis);
      console.log('Native Opus audio in Ogg container playback capability:', canPlayOggOpus);
      console.log('Native PCM audio in Waveform Audio File Format (WAVE) playback capability:', canPlayWave);
      console.log('Native MPEG Audio Layer 3 (MP3) playback capability:', canPlayMP3);
      console.log('Native Low-Complexity AAC audio in MP4 container playback capability:', canPlayAAC);
      console.log('Native AMR audio in 3GPP container playback capability:', canPlay3GPP);

      if (!(canPlayWave || canPlayMP3)) {
        throw new Error(
          'Native Wave or MP3 playback is required',
        );
      }
    }
  }

  /**
   * Get a player object that performs audio compression, when available.
   *
   * Using the Media Stream Recording API for recording is the preferred
   * solution. It allows recording compressed audio which makes it quicker to
   * submit. If not available, use a default createScriptProcessor is used.
   *
   * @param {Function} callbacks - Callbacks to add to the chosen player.
   * @private
   */
  getPlayer(callbacks) {
    let player = null;

    if (this.canUseAudio) {
      // Use the recorder with MediaRecorder implementation.
      player = new WebAudioPlayer(callbacks);
    } else {
      throw new Error('Unable to find a proper player.');
    }
    console.log('Player initialised.');
    return player;
  }

  /**
   * Preload audio from an URL.
   *
   * @param {string} url - The URL that contains the audio.
   * @param {boolean} [preload=true] - Try preloading metadata and possible some audio. Set to false
   * to not download anything until playing.
   * @param {?Function} loadedCb - The callback that is invoked when the duration of the audio file
   * is first known.
   * @emits {Event} 'canplay' When the player is ready to play.
   */
  load(url, preload, loadedCb) {
    this.reset();
    this.player.load(url, preload, loadedCb);
    this.audioLevel = 1;

    // If preloading is disabled, the 'canplay' event won't be triggered.
    // In that case, fire it manually.
    if (!preload) {
      this.emitter.emit('canplay', []);
    }
  }

  /**
   * Unload previously loaded audio. Stops the player and any stopwatch.
   *
   * @emits {Event} 'unloaded'
   */
  reset() {
    this.stop();
    this.player.reset();
    this.emitter.emit('unloaded', []);
  }

  /**
   * Start or continue playback of audio. Also starts the stopwatch at the given position.
   *
   * @param {?number} position - When position is given, start playing from this position (seconds).
   */
  play(position) {
    if (this.player.isPlaying()) {
      return;
    }
    this.player.play(position);
    if (this.stopwatch) {
      const time = Math.round(this.player.getCurrentTime() * 10);
      this.stopwatch.value = time;
      this.stopwatch.start();
    }
  }

  /**
   * Stop playback of audio. Stops and resets the stopwatch.
   */
  stop() {
    if (this.stopwatch) {
      this.stopwatch.reset();
      this.stopwatch.stop();
    }
    this.player.stop();
  }

  /**
   * Pause playback of audio. Stops the stopwatch.
   */
  pause() {
    if (this.stopwatch) {
      this.stopwatch.stop();
    }
    this.player.pause();
  }

  /**
   * Toggle audio playback. Switch from playing to paused state and back.
   */
  togglePlayback() {
    if (this.player.isPlaying()) {
      this.pause();
    } else {
      this.play();
    }
  }

  /**
   * Start preloading audio.
   */
  preload() {
    this.player.preload();
  }

  /**
   * Start playing audio at the given offset. Corrects a percentage under 0 or above 100 to the
   * respective values.
   *
   * @param {number} percentage - Start at this percentage (0..100) of the audio stream.
   */
  scrub(percentage) {
    if (percentage &lt; 0) {
      this.player.scrub(0);
    } else if (percentage > 100) {
      this.player.scrub(100);
    } else {
      this.player.scrub(percentage);
    }
    if (this.stopwatch) {
      this.stopwatch.value = Math.round(this.player.getCurrentTime() * 10);
    }
  }

  /**
   * Returns the percentage of which the buffer is filled.
   *
   * @returns {number} Percentage of buffer fill.
   */
  getBufferFill() {
    return this.player.getBufferFill();
  }

  /**
   * Returns the current playing time as offset in seconds from the start.
   *
   * @returns {number} Time in seconds as offset from the start.
   */
  getCurrentTime() {
    return this.player.getCurrentTime();
  }

  /**
   * Returns the total duration in seconds.
   *
   * @returns {number} Time in seconds of fragment duration.
   */
  getDuration() {
    return this.player.getDuration();
  }

  /**
   * Check if there is playback in progress.
   *
   * @returns {boolean} True if user is currently playing audio. False otherwise.
   */
  isPlaying() {
    return this.player.isPlaying();
  }

  /**
   * Returns ready state of the player.
   *
   * @returns {boolean} True when player is ready to start loading data or play. False when no audio
   * is loaded or the player is preparing.
   */
  canPlay() {
    return this.player.canPlay();
  }

  /**
   * Set the playback rate of the audio. Values are used according to HTML5 Audio.
   * Example values:
   * *1.0 is normal speed.
   * *0.5 is half speed (slower).
   * *2.0 is double speed (faster).
   * *-1.0 is backwards, normal speed.
   * *-0.5 is backwards, half speed.
   *
   * @param {number} rate - Rate at which to change the audio playback.
   */
  setPlaybackRate(rate) {
    this.player.setPlaybackRate(rate);
  }

  /**
   * Get the playback rate of the current loaded audio.
   *
   * @returns {number} Playback rate of the audio.
   */
  getPlaybackRate() {
    return this.player.getPlaybackRate();
  }

  /**
   * Bind a stopwatch to sync with the playing and stopping functionality of the player.
   *
   * @param {Function} tickCb - Callback to invoke on every tick. A tick occurs once every 100 ms.
   * @throws {Error} If tickCb is null.
   * @returns {Stopwatch} New Stopwatch object.
   */
  bindStopwatch(tickCb) {
    this.stopwatch = new Stopwatch((time) => {
      const duration = this.getDuration() * 10 / this.player.sound.playbackRate;
      if (time > duration) {
        tickCb(duration);
      } else {
        tickCb(time);
      }
    });
    return this.stopwatch;
  }

  /**
   * Sets the audio level of the current loaded audio. Valid values are from 0 (0%) to 1 (100%).
   *
   * @param {number} volume - Volume value from 0 to 1.
   */
  setAudioVolume(volume) {
    if (volume !== 0) {
      this.audioMuted = false;
    }
    if (volume === 0) {
      this.audioMuted = true;
    }
    this.player.setAudioVolume(volume);
  }

  /**
   * Gets the audio level of the current loaded audio. Valid values are from 0 (0%) to 1 (100%).
   *
   * @returns {number} Volume level of the current loaded audio.
   */
  getAudioVolume() {
    return this.player.getAudioVolume();
  }

  /**
   * Toggle the current playing audio to be muted or not. If the audio will be muted, the current
   * audio level is remembered and can be unmuted to continue at this same audio level.
   */
  toggleAudioMute() {
    this.setAudioMute(!this.audioMuted);
  }

  /**
   * Manually set the muted state of the current loaded audio.
   *
   * @param {boolean} shouldMute - Whether the audio should be muted or unmuted.
   */
  setAudioMute(shouldMute) {
    if (shouldMute) {
      this.audioLevel = this.getAudioVolume();
      this.setAudioVolume(0);
    } else {
      this.setAudioVolume(this.audioLevel);
    }
  }

  /**
   * Return the muted state of the current loaded audio.
   *
   * @returns {boolean} The muted state of the current loaded audio.
   */
  isAudioMuted() {
    return this.audioMuted;
  }
}

export default AudioPlayer;
</code></pre>
        </article>
    </section>




    
    
</div>

<br class="clear">

<footer>
    Documentation generated by <a href="https://github.com/jsdoc3/jsdoc">JSDoc 3.5.5</a> on Wed Nov 21 2018 21:11:22 GMT+0000 (UTC) using the <a href="https://github.com/clenemt/docdash">docdash</a> theme.
</footer>

<script>prettyPrint();</script>
<script src="scripts/linenumber.js"></script>

<script src="scripts/jquery-3.1.1.min.js"></script>

<script src="scripts/search.js"></script>




</body>
</html>
